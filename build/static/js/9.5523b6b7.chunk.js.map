{"version":3,"sources":["api/userApi.js","modules/admin/users/usersHooks.js","modules/admin/users/UsersList.js","modules/admin/users/UsersView.js","modules/admin/users/UsersEdit.js","modules/admin/users/UsersRoutes.js"],"names":["getListApi","page","http","url","getItemApi","id","saveItemApi","data","method","deleteItemApi","useGetItem","useState","name","role","item","setItem","a","response","useAsync","loading","error","UsersList","totalCount","list","current","setData","getList","loadingInit","errorInit","useAsyncCallback","onUpdateList","execute","loadingCallback","errorCallback","useList","onDelete","updateList","confirm","content","onOk","okType","okText","maskClosable","useDeleteItem","columns","title","dataIndex","key","render","type","to","routes","responsive","align","buttons","onClick","overlay","trigger","className","e","preventDefault","MoreOutlined","linkClassName","dataSource","rowKey","pagination","scroll","y","total","onChange","showSizeChanger","UsersView","props","match","params","Loader","Item","UsersEdit","dispatch","useDispatch","payload","push","useSaveItem","loadingSave","ViewButton","onSubmit","initialValues","placeholder","options","value","text","validate","htmlType","UserRoutes","isExact","path","component","exact"],"mappings":"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","file":"static/js/9.5523b6b7.chunk.js","sourcesContent":["import {http} from \"../utils/httpClient\";\r\n\r\nexport function getListApi(page) {\r\n  return http({\r\n    url: `/users/list?page=${page || 1}` //eslint-disable-line\r\n  });\r\n}\r\n\r\nexport function getItemApi(id) {\r\n  return http({\r\n    url: `/users/item/${id}`\r\n  });\r\n}\r\n\r\nexport function saveItemApi(data) {\r\n  return http({\r\n    url: `/users/item`,\r\n    method: \"POST\",\r\n    data,\r\n  });\r\n}\r\n\r\nexport function deleteItemApi(id) {\r\n  return http({\r\n    url: `/users/item/${id}`,\r\n    method: \"DELETE\",\r\n  });\r\n}\r\n","import {useState} from \"react\";\r\n\r\nimport {Modal} from \"antd\";\r\n\r\nimport {useAsync, useAsyncCallback} from \"react-async-hook\";\r\nimport {useDispatch} from \"react-redux\";\r\nimport {push} from \"connected-react-router\";\r\n\r\nimport {getListApi, getItemApi, saveItemApi, deleteItemApi} from \"../../../api/userApi\";\r\n\r\nimport * as routes from \"../../../constants/routes\";\r\n\r\nexport function useList() {\r\n  const [data, setData] = useState({\r\n    totalCount: 0,\r\n    list: [],\r\n    current: 1,\r\n  });\r\n  \r\n  async function getList(page) {\r\n    const response = await getListApi(page);\r\n    \r\n    setData({\r\n      ...response,\r\n      current: page || 1, // eslint-disable-line\r\n    });\r\n  }\r\n  \r\n  const {loading: loadingInit, error: errorInit} = useAsync(getList, []);\r\n  \r\n  const {execute: onUpdateList, loading: loadingCallback, error: errorCallback} = useAsyncCallback(getList);\r\n  \r\n  return {\r\n    ...data,\r\n    loading: loadingInit || loadingCallback,\r\n    error: errorInit || errorCallback,\r\n    onUpdateList,\r\n  };\r\n}\r\n\r\nexport function useGetItem(id) {\r\n  const [item, setItem] = useState({\r\n    name: \"\",\r\n    role: null,\r\n  });\r\n  \r\n  async function callback() {\r\n    if (!id) return;\r\n    \r\n    const response = await getItemApi(id);\r\n    \r\n    setItem(response);\r\n  }\r\n  \r\n  const {loading, error} = useAsync(callback, [id]);\r\n  \r\n  return {item, loading, error};\r\n}\r\n\r\nexport function useSaveItem() {\r\n  const dispatch = useDispatch();\r\n  \r\n  async function callback(payload) {\r\n    await saveItemApi(payload);\r\n  \r\n    dispatch(push(routes.ADMIN_ROUTE + routes.EMPLOYEE_ROUTE + routes.LIST_ROUTE));\r\n  }\r\n  \r\n  return useAsyncCallback(callback);\r\n}\r\n\r\nexport function useDeleteItem(updateList) {\r\n  async function callback(id) {\r\n    await deleteItemApi(id);\r\n    \r\n    await updateList();\r\n  }\r\n  \r\n  const {execute, loading, error} = useAsyncCallback(callback);\r\n  \r\n  function onDelete(id) {\r\n    Modal.confirm({\r\n      content: `Are you sure to delete this item?`,\r\n      onOk: () => execute(id),\r\n      okType: \"danger\",\r\n      okText: \"Delete\",\r\n      maskClosable: true,\r\n    })\r\n  }\r\n  \r\n  return {onDelete, loading, error};\r\n}\r\n","import React from 'react';\r\n\r\nimport {Table, Pagination, Dropdown} from \"antd\";\r\nimport {MoreOutlined} from '@ant-design/icons';\r\n\r\nimport {Button} from \"../../../widgets/formik\";\r\n\r\nimport {useList, useDeleteItem} from \"./usersHooks\";\r\n\r\nimport * as routes from \"../../../constants/routes\";\r\n\r\nexport function UsersList() {\r\n  const {list, totalCount, current, loading, onUpdateList} = useList();\r\n  const {onDelete} = useDeleteItem(() => onUpdateList(current));\r\n  \r\n  const columns = [\r\n    {\r\n      title: 'Name',\r\n      dataIndex: 'name',\r\n      key: 'name',\r\n      render: (name, item) => (\r\n        <Button\r\n          type=\"link\"\r\n          to={routes.ADMIN_ROUTE + routes.EMPLOYEE_ROUTE + routes.VIEW_ROUTE + \"/\" + item.id}\r\n        >\r\n          {name}\r\n        </Button>\r\n      )\r\n    },\r\n    {\r\n      title: 'Role',\r\n      dataIndex: 'role',\r\n      key: 'role',\r\n      responsive: [\"sm\"],\r\n    },\r\n    {\r\n      title: 'Actions',\r\n      dataIndex: 'id',\r\n      key: 'action',\r\n      align: \"right\",\r\n      render: id => {\r\n        const buttons = (\r\n          <>\r\n            <Button\r\n              to={routes.ADMIN_ROUTE + routes.EMPLOYEE_ROUTE + routes.EDIT_ROUTE + \"/\" + id}\r\n            >\r\n              Edit\r\n            </Button>\r\n            <Button\r\n              type=\"danger\"\r\n              onClick={() => onDelete(id)}\r\n            >\r\n              Delete\r\n            </Button>\r\n          </>\r\n        )\r\n        \r\n        return (\r\n          <>\r\n            <Dropdown\r\n              overlay={buttons}\r\n              trigger={['click']}\r\n              className=\"table-list-dropdown\"\r\n            >\r\n              <Button type=\"link\" onClick={e => e.preventDefault()}>\r\n                <MoreOutlined/>\r\n              </Button>\r\n            </Dropdown>\r\n            <div className=\"table-list-buttons\">\r\n              {buttons}\r\n            </div>\r\n          </>\r\n        )\r\n      }\r\n    },\r\n  ];\r\n  \r\n  return (\r\n    <div className=\"table-page\">\r\n      <Button\r\n        to={routes.ADMIN_ROUTE + routes.EMPLOYEE_ROUTE + routes.EDIT_ROUTE + \"/0\"}\r\n        linkClassName=\"new-item\"\r\n      >\r\n        New Employee\r\n      </Button>\r\n      <Table\r\n        dataSource={list}\r\n        columns={columns}\r\n        loading={loading}\r\n        rowKey=\"id\"\r\n        pagination={false}\r\n        scroll={{y: \"auto\"}}\r\n      />\r\n      <Pagination\r\n        current={current}\r\n        total={totalCount}\r\n        onChange={onUpdateList}\r\n        showSizeChanger={false}\r\n        className=\"table-pagination\"\r\n      />\r\n    </div>\r\n  );\r\n}\r\n","import React from 'react';\r\n\r\nimport {Form} from \"antd\";\r\n\r\nimport {Loader} from \"../../../widgets/loader/Loader\";\r\nimport {Button} from \"../../../widgets/formik\";\r\n\r\nimport {useGetItem} from \"./usersHooks\";\r\n\r\nimport * as routes from \"../../../constants/routes\";\r\n\r\nexport function UsersView(props) {\r\n  const {item, loading} = useGetItem(props.match.params.id);\r\n  \r\n  if (loading) return <Loader/>;\r\n  \r\n  return (\r\n    <div className=\"user-view-page\">\r\n      <div className=\"buttons\">\r\n        <Button to={routes.ADMIN_ROUTE + routes.EMPLOYEE_ROUTE + routes.LIST_ROUTE}>\r\n          List\r\n        </Button>\r\n        <Button to={routes.ADMIN_ROUTE + routes.EMPLOYEE_ROUTE + routes.EDIT_ROUTE + \"/\" + item.id}>\r\n          Edit\r\n        </Button>\r\n      </div>\r\n      <div className=\"body\">\r\n        <h2>{item.name}</h2>\r\n        <Form.Item>\r\n          role: {item.role}\r\n        </Form.Item>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React from 'react';\r\n\r\nimport {Loader} from \"../../../widgets/loader/Loader\";\r\nimport {Button, Form, Input, Select} from \"../../../widgets/formik\";\r\n\r\nimport {useGetItem, useSaveItem} from \"./usersHooks\";\r\n\r\nimport * as routes from \"../../../constants/routes\";\r\n\r\nexport function UsersEdit(props) {\r\n  const id = +props.match.params.id;\r\n  const {item, loading} = useGetItem(id);\r\n  \r\n  const {execute, loading: loadingSave} = useSaveItem();\r\n  \r\n  if (loading) return <Loader/>;\r\n  \r\n  return (\r\n    <div className=\"user-edit-page\">\r\n      <div className=\"buttons\">\r\n        <Button to={routes.ADMIN_ROUTE + routes.EMPLOYEE_ROUTE + routes.LIST_ROUTE}>\r\n          List\r\n        </Button>\r\n        <ViewButton id={id}/>\r\n      </div>\r\n      <div className=\"body\">\r\n        <Form\r\n          onSubmit={({name, role}) => execute({name, role, id})}\r\n          initialValues={item}\r\n        >\r\n          <Input\r\n            name='name'\r\n            placeholder=\"name\"\r\n          />\r\n          <Select\r\n            name='role'\r\n            options={[\r\n              {value: \"admin\", text: \"admin\"},\r\n              {value: \"operator\", text: \"operator\"},\r\n              {value: \"manager\", text: \"manager\"},\r\n              {value: \"user\", text: \"user\"},\r\n            ]}\r\n            placeholder=\"Select a role\"\r\n            validate=\"required\"\r\n          />\r\n          <div className=\"submit-button-wrapper\">\r\n            <Button\r\n              htmlType=\"submit\"\r\n              loading={loadingSave}\r\n            >\r\n              Save\r\n            </Button>\r\n          </div>\r\n        </Form>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction ViewButton(props) {\r\n  if (!props.id) return <div/>;\r\n  \r\n  return (\r\n    <Button to={routes.ADMIN_ROUTE + routes.EMPLOYEE_ROUTE + routes.VIEW_ROUTE + \"/\" + props.id}>\r\n      View\r\n    </Button>\r\n  )\r\n}","import \"./users.less\";\r\n\r\nimport React from \"react\";\r\n\r\nimport {Redirect, Route, Switch} from \"react-router-dom\";\r\n\r\nimport {UsersList} from \"./UsersList\";\r\nimport {UsersView} from \"./UsersView\";\r\nimport {UsersEdit} from \"./UsersEdit\";\r\n\r\nimport * as routes from \"../../../constants/routes\";\r\n\r\nexport default function UserRoutes(props) {\r\n  if (props.match.isExact) return <Redirect to={props.match.path + routes.LIST_ROUTE}/>\r\n  \r\n  return (\r\n    <Switch>\r\n      <Route path={props.match.path + routes.LIST_ROUTE} component={UsersList} exact/>\r\n      <Route path={props.match.path + routes.VIEW_ROUTE + routes.ID_ROUTE} component={UsersView} exact/>\r\n      <Route path={props.match.path + routes.EDIT_ROUTE + routes.ID_ROUTE} component={UsersEdit} exact/>\r\n      <Redirect to={routes.ROUTE_404}/>\r\n    </Switch>\r\n  );\r\n}\r\n"],"sourceRoot":""}